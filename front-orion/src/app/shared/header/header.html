<header class="flex h-[94px] w-full items-center border-b border-black">
  <div class="mx-auto flex w-full max-w-5xl items-center">
    <!-- Logo -->
    <div class="flex items-center">
      <a [routerLink]="isAuthenticated() ? '/posts/list' : '/'">
        <img
          src="/assets/logo.png"
          alt="MDD Logo"
          class="h-[81px] w-[140px] object-contain"
        />
      </a>
    </div>

    <!-- Menu de navigation desktop -->
    <nav class="ml-auto hidden items-center space-x-6 text-sm md:flex">
      @if (!isAuthenticated()) {
      <a class="hover:underline" (click)="goToLogin()">Se connecter</a>
      <a class="hover:underline" (click)="goToRegister()">S'inscrire</a>
      } @else {
      <a class="hover:underline" (click)="goToArticles()">Mes Articles</a>
      <a class="hover:underline" (click)="goToTopics()">Thèmes</a>
      <button type="button" class="hover:underline" (click)="logout()">
        Se déconnecter
      </button>
      <a
        class="flex h-10 w-10 items-center justify-center rounded-full bg-slate-200"
        aria-label="Espace compte utilisateur"
      >
        <img [src]="avatarSrc" alt="Avatar utilisateur" class="h-8 w-8" />
      </a>
      }
    </nav>

    <!-- Bouton menu mobile -->
    <button
      type="button"
      class="mr-5 ml-auto inline-flex items-center justify-center rounded-md border border-black px-3 py-2 md:hidden"
      [attr.aria-label]="menuOpen() ? 'Fermer le menu' : 'Ouvrir le menu'"
      aria-controls="mobile-nav"
      [attr.aria-expanded]="menuOpen()"
      (click)="toggleMenu()"
    >
      @if (menuOpen()) {
      <svg
        xmlns="http://www.w3.org/2000/svg"
        viewBox="0 0 24 24"
        fill="none"
        stroke="currentColor"
        stroke-width="1.5"
        class="h-5 w-5"
      >
        <path d="M6 6l12 12" />
        <path d="M6 18L18 6" />
      </svg>
      } @else {
      <svg
        xmlns="http://www.w3.org/2000/svg"
        viewBox="0 0 24 24"
        fill="none"
        stroke="currentColor"
        stroke-width="1.5"
        class="h-5 w-5"
      >
        <path d="M4 6h16" />
        <path d="M4 12h16" />
        <path d="M4 18h16" />
      </svg>
      }
    </button>
  </div>
</header>

@if (menuOpen()) {
<div id="mobile-nav" class="border-b border-black bg-white py-4 md:hidden">
  <nav class="mx-auto flex w-full max-w-5xl flex-col space-y-3 px-6 text-sm">
    @if (!isAuthenticated()) {
    <button
      type="button"
      class="text-left hover:underline"
      (click)="goToLogin()"
    >
      Se connecter
    </button>
    <button
      type="button"
      class="text-left hover:underline"
      (click)="goToRegister()"
    >
      S'inscrire
    </button>
    } @else {
    <button
      type="button"
      class="text-left hover:underline"
      (click)="goToArticles()"
    >
      Mes articles
    </button>
    <button
      type="button"
      class="text-left hover:underline"
      (click)="goToTopics()"
    >
      Thèmes
    </button>
    <button type="button" class="text-left hover:underline" (click)="logout()">
      Se déconnecter
    </button>
    <div class="flex items-center space-x-3 pt-2">
      <button type="button" class="text-left hover:underline">
        Mon compte
      </button>
    </div>
    }
  </nav>
</div>
}
